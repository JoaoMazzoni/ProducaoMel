-- Tabela: Colmeia
CREATE TABLE Colmeia (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Localizacao TEXT NOT NULL,
    Data_instalacao DATE NOT NULL,
    Numero_abelhas INTEGER NOT NULL,
    Estado_saude TEXT NOT NULL CHECK (Estado_saude IN ('Saudável', 'Doente', 'Monitorada')),
    Especie_abelhas TEXT NOT NULL
);


-- Tabela: Flores
CREATE TABLE Flores (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Nome TEXT NOT NULL,
    Tipo TEXT NOT NULL CHECK (Tipo IN ('Silvestre', 'Cultivada')),
    Periodo_floracao TEXT NOT NULL,
    Origem TEXT NOT NULL,
    Atracao_abelhas BOOLEAN NOT NULL  
);


-- Tabela: Mel
CREATE TABLE Mel (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Nome TEXT NOT NULL,
    Cor TEXT NOT NULL,
    Consistencia TEXT NOT NULL CHECK (Consistencia IN ('Fino', 'Viscoso', 'Espesso')),
    Sabor TEXT NOT NULL,
    Aroma TEXT NOT NULL,  
    Composicao TEXT NOT NULL CHECK (Composicao IN ('Monofloral', 'Polifloral')),
    FlorID INTEGER,
    FOREIGN KEY (FlorID) REFERENCES Flores(ID) ON DELETE SET NULL  -- Referência com ON DELETE SET NULL
);


-- Tabela: Producao
CREATE TABLE Producao (
    Lote INTEGER PRIMARY KEY AUTOINCREMENT,
    Data_colheita DATE NOT NULL,
    ColmeiaID INTEGER,
    MelID INTEGER,
    Quantidade_colhida REAL NOT NULL,
    Qualidade_final TEXT NOT NULL CHECK (Qualidade_final IN ('Excelente', 'Boa', 'Regular', 'Ruim')),
    FOREIGN KEY (ColmeiaID) REFERENCES Colmeia(ID),
    FOREIGN KEY (MelID) REFERENCES Mel(ID)
);
